{"version":3,"sources":["../../src/lib/animate.js"],"names":["animate","duration","timing","draw","window","start","performance","now","requestAnimationFrame","time","timeFraction","progress"],"mappings":";;;;;;;AAAA;;;;;;;AAOe,SAASA,OAAT,OAA8C;AAAA,MAA1BC,QAA0B,QAA1BA,QAA0B;AAAA,MAAhBC,MAAgB,QAAhBA,MAAgB;AAAA,MAARC,IAAQ,QAARA,IAAQ;;AAC3D,MAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;AACjC;AACD;;AAED,MAAMC,KAAK,GAAGD,MAAM,CAACE,WAAP,CAAmBC,GAAnB,EAAd;AAEAH,EAAAA,MAAM,CAACI,qBAAP,CAA6B,SAASR,OAAT,CAAkBS,IAAlB,EAAwB;AACnD,QAAIC,YAAY,GAAG,CAACD,IAAI,GAAGJ,KAAR,IAAiBJ,QAApC;;AAEA,QAAIS,YAAY,GAAG,CAAnB,EAAsB;AACpBA,MAAAA,YAAY,GAAG,CAAf;AACD;;AAED,QAAMC,QAAQ,GAAGT,MAAM,CAACQ,YAAD,CAAvB;AAEAP,IAAAA,IAAI,CAACQ,QAAD,CAAJ;;AAEA,QAAID,YAAY,GAAG,CAAnB,EAAsB;AACpBN,MAAAA,MAAM,CAACI,qBAAP,CAA6BR,OAA7B;AACD;AACF,GAdD;AAeD","sourcesContent":["/**\n * Функция для js анимации\n * @param {number} duration\n * @param {function} timing тайминг функция анимации\n * @param {function} draw коллбэк, в который прокидывается прогресс [0, 1]\n * @returns {void}\n */\nexport default function animate ({ duration, timing, draw }) {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  const start = window.performance.now();\n\n  window.requestAnimationFrame(function animate (time) {\n    let timeFraction = (time - start) / duration;\n\n    if (timeFraction > 1) {\n      timeFraction = 1;\n    }\n\n    const progress = timing(timeFraction);\n\n    draw(progress);\n\n    if (timeFraction < 1) {\n      window.requestAnimationFrame(animate);\n    }\n  });\n}\n"],"file":"animate.js"}