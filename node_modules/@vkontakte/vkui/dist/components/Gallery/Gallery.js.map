{"version":3,"sources":["../../../src/components/Gallery/Gallery.js"],"names":["baseClassNames","Gallery","props","targetIndex","setState","animation","shiftX","calculateIndent","current","timeout","clearTimeout","setTimeout","autoplay","e","startT","isDraggable","originalEvent","preventDefault","isSlideX","onDragStart","state","deltaX","dragging","isSlide","getTarget","onDragEnd","onEnd","initializeSlides","layerWidth","slides","containerWidth","container","offsetWidth","viewportWidth","viewport","min","calcMin","max","calcMax","window","requestAnimationFrame","duration","length","go","acc","item","i","ref","getSlideRef","push","id","slide","slidesStore","slideIndex","initialSlideIndex","React","createRef","getChildren","children","callback","getSlidesCoords","reduce","val","width","align","isCenterWithCustomWidth","coordX","targetSlide","validateIndent","indent","Number","value","concat","elem","res","offsetLeft","expectDeltaX","Date","shift","direction","index","previousValue","Math","abs","currentValue","reduceChildren","addEventListener","onResize","prevProps","prevState","isChildrenDirty","onChange","nextProps","removeEventListener","slideWidth","bullets","className","restProps","calculateDragIndent","layerStyle","WebkitTransform","transform","WebkitTransition","transition","onStart","onMoveX","getViewportRef","map","Component","PropTypes","node","string","style","object","oneOfType","number","func","oneOf"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport getClassName from '../../helpers/getClassName';\nimport Touch from '../Touch/Touch';\nimport classNames from '../../lib/classNames';\n\nconst baseClassNames = getClassName('Gallery');\n\nexport default class Gallery extends Component {\n  constructor (props) {\n    super(props);\n\n    const current = typeof props.slideIndex === 'number' ? props.slideIndex : props.initialSlideIndex;\n\n    this.state = {\n      containerWidth: 0,\n      current,\n      deltaX: 0,\n      shiftX: 0,\n      slides: [],\n      animation: false,\n      duration: 0.24\n    };\n\n    this.container = React.createRef();\n\n    this.slidesStore = {};\n    this.slides = this.getChildren(props.children);\n  }\n\n  static propTypes = {\n    children: PropTypes.node,\n    className: PropTypes.string,\n    style: PropTypes.object,\n    slideWidth: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.number\n    ]),\n    autoplay: PropTypes.number,\n    initialSlideIndex: PropTypes.number,\n    slideIndex: PropTypes.number,\n    onDragStart: PropTypes.func,\n    onDragEnd: PropTypes.func,\n    onChange: PropTypes.func,\n    onEnd: PropTypes.func,\n    align: PropTypes.oneOf(['left', 'center', 'right']),\n    bullets: PropTypes.oneOf(['dark', 'light', false])\n  };\n\n  static defaultProps = {\n    slideWidth: '100%',\n    children: '',\n    autoplay: 0,\n    initialSlideIndex: 0,\n    align: 'left',\n    bullets: false\n  };\n\n  get isCenterWithCustomWidth () {\n    return this.props.slideWidth === 'custom' && this.props.align === 'center';\n  }\n\n  initializeSlides (callback = () => {}) {\n    const slides = this.getSlidesCoords();\n\n    const containerWidth = this.container.current.offsetWidth;\n    const viewportWidth = this.viewport.offsetWidth;\n    const layerWidth = slides.reduce((val, slide) => slide.width + val, 0);\n\n    const min = this.calcMin({ containerWidth, layerWidth, viewportWidth, slides });\n    const max = this.calcMax({ containerWidth, layerWidth, viewportWidth, slides });\n\n    this.setState({ min, max, layerWidth, containerWidth, slides }, callback);\n  }\n\n  calcMin ({ containerWidth, layerWidth, viewportWidth, slides }) {\n    switch (this.props.align) {\n      case 'left':\n        return containerWidth - layerWidth;\n      case 'right':\n        return viewportWidth - layerWidth;\n      case 'center':\n        if (this.isCenterWithCustomWidth && slides.length) {\n          const { coordX, width } = slides[slides.length - 1];\n          return (viewportWidth / 2) - coordX - (width / 2);\n        } else {\n          return viewportWidth - (containerWidth - viewportWidth) / 2 - layerWidth;\n        }\n    }\n  }\n\n  calcMax ({ viewportWidth, slides }) {\n    if (this.isCenterWithCustomWidth && slides.length) {\n      const { width, coordX } = slides[0];\n      return (viewportWidth / 2) - coordX - (width / 2);\n    } else {\n      return 0;\n    }\n  }\n\n  /**\n   * Считает отступ слоя галереи\n   * @param {Number} targetIndex ID целевого слайда\n   * @returns {Number} Значения отступа\n   */\n  calculateIndent (targetIndex) {\n    const { slides } = this.state;\n\n    if (!this.isDraggable()) {\n      return 0;\n    }\n\n    const targetSlide = slides.length ? slides[targetIndex] : null;\n\n    if (targetSlide) {\n      const { coordX, width } = targetSlide;\n\n      if (this.isCenterWithCustomWidth) {\n        const viewportWidth = this.viewport.offsetWidth;\n        return (viewportWidth / 2) - coordX - (width / 2);\n      }\n\n      return this.validateIndent(-1 * coordX);\n    } else {\n      return 0;\n    }\n  }\n\n  /**\n   * Считает отступ слоя галереи во время драга\n   * @returns {Number} Значения отступа\n   */\n  calculateDragIndent () {\n    const { shiftX, deltaX, min, max } = this.state;\n    const indent = shiftX + deltaX;\n\n    if (indent > max) {\n      return max + Number((indent - max) / 3);\n    } else if (indent < min) {\n      return min + Number((indent - min) / 3);\n    }\n\n    return indent;\n  }\n\n  validateIndent (value) {\n    const { min, max } = this.state;\n\n    if (value < min) {\n      return min;\n    } else if (value > max) {\n      return max;\n    }\n\n    return value;\n  }\n\n  isDraggable () {\n    return this.state.layerWidth > this.state.containerWidth;\n  }\n\n  /**\n   * Получает координаты и размеры каждого слайда\n   * @returns {Array} Массив с объектами, описывающими габариты слайда\n   */\n  getSlidesCoords () {\n    return [].concat(this.props.children).reduce((acc, item, i) => {\n      if (item) {\n        const elem = this.slidesStore[`slide-${i}`];\n        const res = {\n          coordX: elem.offsetLeft,\n          width: elem.offsetWidth\n        };\n\n        acc.push(res);\n      }\n\n      return acc;\n    }, []);\n  }\n\n  /**\n   * Получает индекс слайда, к которому будет осуществлен переход\n   * @returns {Number} Индекс слайда\n   */\n  getTarget () {\n    const { slides, current, deltaX, shiftX, startT, max } = this.state;\n    const expectDeltaX = deltaX / (new Date() - startT) * 240 * 0.6;\n    const shift = shiftX + deltaX + expectDeltaX - max;\n    const direction = deltaX < 0 ? 1 : -1;\n\n    // Находим ближайшую границу слайда к текущему отступу\n    let targetIndex = slides.reduce((val, item, index) => {\n      const previousValue = Math.abs(slides[val].coordX + shift);\n      const currentValue = Math.abs(item.coordX + shift);\n\n      return previousValue < currentValue ? val : index;\n    }, current);\n\n    if (targetIndex === current) {\n      let targetSlide = current + direction;\n\n      if (targetSlide >= 0 && targetSlide < slides.length) {\n        if (Math.abs(deltaX) > slides[targetSlide].width * 0.05) {\n          targetIndex = targetSlide;\n        }\n      }\n    }\n\n    return targetIndex;\n  }\n\n  go = (targetIndex) => {\n    this.setState({\n      animation: true,\n      shiftX: this.calculateIndent(targetIndex),\n      current: targetIndex\n    });\n\n    if (this.timeout) {\n      this.clearTimeout();\n      this.setTimeout(this.props.autoplay);\n    }\n  };\n\n  onStart = (e) => {\n    this.setState({\n      animation: false,\n      startT: e.startT\n    });\n  }\n\n  onMoveX = (e) => {\n    if (!this.isDraggable()) {\n      return;\n    }\n\n    e.originalEvent.preventDefault();\n\n    if (e.isSlideX) {\n      this.props.onDragStart && this.props.onDragStart();\n      \n      if (this.state.deltaX !== e.shiftX || this.state.dragging !== e.isSlideX) {\n        this.setState({\n          deltaX: e.shiftX,\n          dragging: e.isSlideX\n        });\n      }\n\n      return true;\n    }\n  }\n\n  onEnd = (e) => {\n    const targetIndex = e.isSlide ? this.getTarget() : this.state.current;\n    this.props.onDragEnd && this.props.onDragEnd();\n\n    this.setState({\n      shiftX: this.calculateIndent(targetIndex),\n      deltaX: 0,\n      animation: true,\n      current: targetIndex\n    });\n\n    if (this.props.onEnd) {\n      this.props.onEnd({\n        targetIndex\n      });\n    }\n\n    if (this.timeout) {\n      this.clearTimeout();\n      this.setTimeout(this.props.autoplay);\n    }\n\n    return true;\n  }\n\n  onResize = () => {\n    this.initializeSlides();\n\n    const { layerWidth, slides } = this.state;\n    const containerWidth = this.container.current.offsetWidth;\n\n    const viewportWidth = this.viewport.offsetWidth;\n\n    this.setState({\n      shiftX: this.calculateIndent(this.state.current),\n      containerWidth,\n      min: this.calcMin({ layerWidth, containerWidth, viewportWidth, slides }),\n      max: this.calcMax({ layerWidth, containerWidth, viewportWidth, slides }),\n      animation: false\n    }, () => {\n      window.requestAnimationFrame(() => this.setState({ animation: true }));\n    });\n  };\n\n  setTimeout = (duration) => {\n    this.timeout = setTimeout(() => {\n      const { slides, current } = this.state;\n      const targetIndex = current < slides.length - 1 ? current + 1 : 0;\n\n      this.go(targetIndex);\n    }, duration);\n  };\n\n  clearTimeout = () => {\n    clearTimeout(this.timeout);\n  };\n\n  getChildren (children) {\n    return [].concat(children || this.props.children).reduce(this.reduceChildren, []);\n  }\n\n  reduceChildren = (acc, item, i) => {\n    if (item) {\n      const ref = this.getSlideRef(i);\n      acc.push(<div className='Gallery__slide' key={`slide-${i}`} ref={ref}>{item}</div>);\n    }\n\n    return acc;\n  }\n\n  getSlideRef = (id) => (slide) => {\n    this.slidesStore[`slide-${id}`] = slide;\n  }\n\n  getViewportRef = (viewport) => {\n    this.viewport = viewport ? viewport.container : {};\n  }\n\n  componentDidMount () {\n    this.initializeSlides(() => {\n      this.setState({\n        shiftX: this.calculateIndent(this.state.current)\n      });\n    });\n\n    window.addEventListener('resize', this.onResize);\n\n    if (this.props.autoplay) {\n      this.setTimeout(this.props.autoplay);\n    }\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    if (this.isChildrenDirty) {\n      this.isChildrenDirty = false;\n      this.initializeSlides();\n    }\n    if (prevState.current !== this.state.current && this.props.onChange) {\n      this.props.onChange(this.state.current);\n    }\n  }\n\n  componentWillReceiveProps (nextProps) {\n    this.slides = this.getChildren(nextProps.children);\n    this.isChildrenDirty = true;\n\n    if (nextProps.autoplay && !this.props.autoplay) {\n      if (nextProps.autoplay) {\n        this.setTimeout(nextProps.autoplay);\n      }\n    }\n    if (!nextProps.autoplay && this.props.autoplay) {\n      this.clearTimeout();\n    }\n    if (nextProps.slideIndex !== this.props.slideIndex && typeof nextProps.slideIndex === 'number') {\n      this.go(nextProps.slideIndex);\n    }\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('resize', this.onResize);\n    this.clearTimeout();\n  }\n\n  render () {\n    const { animation, duration, current, dragging } = this.state;\n    const {\n      children,\n      slideWidth,\n      autoplay,\n      initialSlideIndex,\n      slideIndex,\n      onDragStart,\n      onDragEnd,\n      onChange,\n      onEnd,\n      align,\n      bullets,\n      className,\n      ...restProps\n    } = this.props;\n\n    const indent = dragging ? this.calculateDragIndent() : this.calculateIndent(current);\n\n    const layerStyle = {\n      WebkitTransform: `translateX(${indent}px)`,\n      transform: `translateX(${indent}px)`,\n      WebkitTransition: animation ? `-webkit-transform ${duration}s cubic-bezier(.1, 0, .25, 1)` : 'none',\n      transition: animation ? `transform ${duration}s cubic-bezier(.1, 0, .25, 1)` : 'none'\n    };\n\n    return (\n      <div className={classNames(baseClassNames, className, `Gallery--${align}`, {\n        'Gallery--dragging': dragging,\n        'Gallery--custom-width': slideWidth === 'custom'\n      })} {...restProps} ref={this.container}>\n        <Touch\n          className='Gallery__viewport'\n          onStartX={this.onStart}\n          onMoveX={this.onMoveX}\n          onEnd={this.onEnd}\n          style={{ width: slideWidth === 'custom' ? '100%' : slideWidth }}\n          ref={this.getViewportRef}\n        >\n          <div className='Gallery__layer' style={layerStyle}>{this.slides}</div>\n        </Touch>\n\n        {bullets &&\n          <div className={classNames('Gallery__bullets', `Gallery__bullets--${bullets}`)}>\n            {this.slides.map((item, index) => (\n              <div className={classNames('Gallery__bullet', { 'Gallery__bullet--active': index === current })} key={index} />\n            ))}\n          </div>\n        }\n      </div>\n    );\n  }\n}\n"],"file":"Gallery.js"}