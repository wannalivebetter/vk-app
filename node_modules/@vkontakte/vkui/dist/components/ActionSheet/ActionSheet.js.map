{"version":3,"sources":["../../../src/components/ActionSheet/ActionSheet.js"],"names":["baseClassNames","ActionSheet","closing","setState","waitTransitionFinish","props","onClose","action","autoclose","event","persist","el","e","stopPropagation","eventHandler","transitionEvents","supported","eventName","prefix","removeEventListener","addEventListener","setTimeout","bind","IS_PLATFORM_ANDROID","children","className","title","text","style","insets","restProps","state","IS_PLATFORM_IOS","getRef","Children","toArray","map","Child","index","arr","React","cloneElement","onClick","onItemClick","length","bottom","marginBottom","Component","PropTypes","node","func","isRequired","object","string"],"mappings":"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","sourcesContent":["import React, { Children } from 'react';\nimport PropTypes from 'prop-types';\nimport PopoutWrapper from '../PopoutWrapper/PopoutWrapper';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\nimport { IS_PLATFORM_IOS, IS_PLATFORM_ANDROID } from '../../lib/platform';\nimport transitionEvents from '../../lib/transitionEvents';\nimport withInsets from '../../hoc/withInsets';\n\nconst baseClassNames = getClassName('ActionSheet');\n\nclass ActionSheet extends React.Component {\n  state = {\n    closing: false\n  };\n\n  static propTypes = {\n    /**\n     * iOS only\n     */\n    title: PropTypes.node,\n    /**\n     * iOS only\n     */\n    text: PropTypes.node,\n    onClose: PropTypes.func.isRequired,\n    style: PropTypes.object,\n    children: PropTypes.node,\n    className: PropTypes.string,\n    /**\n     * @ignore\n     */\n    insets: PropTypes.object\n  };\n\n  onClose = () => {\n    this.setState({ closing: true });\n    this.waitTransitionFinish(this.props.onClose);\n  };\n\n  onItemClick = (action, autoclose) => (event) => {\n    event.persist();\n\n    if (autoclose) {\n      this.setState({ closing: true });\n      this.waitTransitionFinish(() => {\n        autoclose && this.props.onClose();\n        action && action(event);\n      });\n    } else {\n      action && action(event);\n    }\n  };\n\n  getRef = el => this.el = el;\n\n  stopPropagation = e => e.stopPropagation();\n\n  waitTransitionFinish (eventHandler) {\n    if (transitionEvents.supported) {\n      const eventName = transitionEvents.prefix ? transitionEvents.prefix + 'TransitionEnd' : 'transitionend';\n\n      this.el.removeEventListener(eventName, eventHandler);\n      this.el.addEventListener(eventName, eventHandler);\n    } else {\n      setTimeout(eventHandler.bind(this), IS_PLATFORM_ANDROID ? 200 : 300);\n    }\n  }\n\n  render () {\n    const { children, className, title, text, style, insets, ...restProps } = this.props;\n\n    return (\n      <PopoutWrapper\n        closing={this.state.closing}\n        v={IS_PLATFORM_IOS ? 'bottom' : 'center'}\n        h=\"center\"\n        className={className}\n        style={style}\n        onClick={this.onClose}\n      >\n        <div {...restProps} ref={this.getRef} onClick={this.stopPropagation} className={classNames(baseClassNames, {\n          'ActionSheet--closing': this.state.closing\n        })}>\n          {IS_PLATFORM_IOS &&\n          <header className=\"ActionSheet__header\">\n            {title && <div className=\"ActionSheet__title\">{title}</div>}\n            {text && <div className=\"ActionSheet__text\">{text}</div>}\n          </header>\n          }\n          {Children.toArray(children).map((Child, index, arr) => (\n            Child && React.cloneElement(Child, {\n              onClick: this.onItemClick(Child.props.onClick, Child.props.autoclose),\n              style: index === arr.length - 1 && insets.bottom ? { marginBottom: insets.bottom } : null\n            })\n          ))}\n        </div>\n      </PopoutWrapper>\n    );\n  }\n}\n\nexport default withInsets(ActionSheet);\n"],"file":"ActionSheet.js"}