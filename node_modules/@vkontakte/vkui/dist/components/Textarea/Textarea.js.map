{"version":3,"sources":["../../../src/components/Textarea/Textarea.js"],"names":["Textarea","props","element","getRef","current","el","offsetHeight","scrollHeight","style","window","getComputedStyle","paddingTop","parseInt","paddingBottom","diff","value","setState","height","onResize","e","grow","resize","isControlledOutside","target","onChange","state","defaultValue","prevProps","requestAnimationFrame","className","getRootRef","status","restProps","PureComponent","PropTypes","object","string","bool","func","oneOfType","shape","instanceOf","Element","oneOf"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from '../../lib/classNames';\nimport FormField from '../FormField/FormField';\n\nexport default class Textarea extends PureComponent {\n  constructor (props) {\n    super(props);\n\n    if (typeof props.value !== 'undefined') {\n      this.isControlledOutside = true;\n      this.state = {};\n    } else {\n      this.state = {\n        value: props.defaultValue || ''\n      };\n    }\n  }\n\n  componentDidMount () {\n    if (this.props.grow) {\n      this.resize();\n    }\n  }\n\n  static propTypes = {\n    style: PropTypes.object,\n    value: PropTypes.string,\n    defaultValue: PropTypes.string,\n    grow: PropTypes.bool,\n    onChange: PropTypes.func,\n    onResize: PropTypes.func,\n    className: PropTypes.string,\n    getRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.instanceOf(Element) })\n    ]),\n    getRootRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.instanceOf(Element) })\n    ]),\n    status: PropTypes.oneOf(['default', 'error', 'valid'])\n  };\n\n  static defaultProps = {\n    style: {},\n    defaultValue: '',\n    grow: true,\n    onResize: () => {}\n  };\n\n  getRef = (element) => {\n    this.element = element;\n\n    const getRef = this.props.getRef;\n    if (getRef) {\n      if (typeof getRef === 'function') {\n        getRef(element);\n      } else {\n        getRef.current = element;\n      }\n    }\n  };\n\n  resize = () => {\n    const el = this.element;\n\n    if (el) {\n      const { offsetHeight, scrollHeight } = el;\n      const style = window.getComputedStyle(el);\n      const paddingTop = parseInt(style.paddingTop);\n      const paddingBottom = parseInt(style.paddingBottom);\n\n      let diff = paddingTop + paddingBottom;\n\n      if (scrollHeight + diff <= offsetHeight) {\n        diff = 0;\n      }\n\n      if (el.value) {\n        this.setState({ height: scrollHeight - diff });\n      }\n\n      this.setState({ height: 0 }, () => {\n        const height = el.scrollHeight - diff;\n\n        this.setState({ height });\n\n        this.props.onResize(el);\n      });\n    }\n  };\n\n  get value () { return this.isControlledOutside ? this.props.value : this.state.value; }\n\n  onChange = (e) => {\n    if (this.props.grow) {\n      this.resize();\n    }\n\n    if (!this.isControlledOutside) {\n      this.setState({ value: e.target.value });\n    }\n\n    if (this.props.onChange) {\n      this.props.onChange(e);\n    }\n  };\n\n  componentDidUpdate (prevProps) {\n    if (prevProps.value && this.props.value === '') {\n      // Fix iOS extra indent on removing content\n      window.requestAnimationFrame(() => {\n        this.element.value = '';\n      });\n    }\n  }\n\n  render () {\n    const { defaultValue, value, onChange, grow, style, onResize, className, getRootRef, getRef, status, ...restProps } = this.props;\n    const height = this.state.height || style.height || 66;\n\n    return (\n      <FormField\n        className={classNames('Textarea', className)}\n        style={style}\n        getRootRef={getRootRef}\n        status={status}\n      >\n        <textarea\n          {...restProps}\n          className=\"Textarea__el\"\n          value={this.value}\n          onChange={this.onChange}\n          ref={this.getRef}\n          style={{ height }}\n        />\n      </FormField>\n    );\n  }\n}\n"],"file":"Textarea.js"}