{"version":3,"sources":["../../../src/components/Select/Select.js"],"names":["Select","props","e","setTitle","isControlledOutside","setState","value","target","onChange","selectedOption","selectEl","options","selectedIndex","title","text","notSelected","hasOwnProperty","element","getRef","current","state","defaultValue","prevProps","children","style","label","alignment","status","placeholder","className","getRootRef","restProps","Component","PropTypes","object","string","name","func","any","node","oneOfType","shape","instanceOf","Element","oneOf"],"mappings":"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","sourcesContent":["\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from '../../lib/classNames';\nimport Icon24Dropdown from '@vkontakte/icons/dist/24/dropdown';\nimport FormField from '../FormField/FormField';\n\nexport default class Select extends Component {\n  constructor (props) {\n    super(props);\n    const state = {\n      title: '',\n      notSelected: false\n    };\n    if (typeof props.value !== 'undefined') {\n      this.isControlledOutside = true;\n    } else {\n      state.value = props.defaultValue || '';\n    }\n    this.state = state;\n  }\n\n  static propTypes = {\n    style: PropTypes.object,\n    className: PropTypes.string,\n    label: PropTypes.string,\n    name: PropTypes.string,\n    onChange: PropTypes.func,\n    value: PropTypes.any,\n    defaultValue: PropTypes.any,\n    children: PropTypes.node,\n    placeholder: PropTypes.string,\n    getRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.instanceOf(Element) })\n    ]),\n    getRootRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.instanceOf(Element) })\n    ]),\n    alignment: PropTypes.oneOf(['left', 'center', 'top']),\n    status: PropTypes.oneOf(['default', 'error', 'valid'])\n  };\n\n  static defaultProps = {\n    alignment: 'left'\n  };\n\n  onChange = (e) => {\n    this.setTitle();\n    if (!this.isControlledOutside) {\n      this.setState({ value: e.target.value });\n    }\n    if (this.props.onChange) {\n      this.props.onChange(e);\n    }\n  };\n\n  setTitle = () => {\n    const selectedOption = this.selectEl.options[this.selectEl.selectedIndex];\n    selectedOption && this.setState({\n      title: selectedOption.text,\n      notSelected: selectedOption.value === '' && this.props.hasOwnProperty('placeholder')\n    });\n  };\n\n  componentDidUpdate (prevProps) {\n    if (prevProps.value !== this.props.value || prevProps.children !== this.props.children) {\n      this.setTitle();\n    }\n  }\n\n  componentDidMount () {\n    this.setTitle();\n  }\n\n  get value () {\n    return this.isControlledOutside ? this.props.value : this.state.value;\n  }\n\n  getRef = (element) => {\n    this.selectEl = element;\n\n    const getRef = this.props.getRef;\n    if (getRef) {\n      if (typeof getRef === 'function') {\n        getRef(element);\n      } else {\n        getRef.current = element;\n      }\n    }\n  };\n\n  render () {\n    const { style, label, value, defaultValue, onChange, alignment, status, placeholder, children, className,\n      getRef, getRootRef, ...restProps } = this.props;\n\n    return (\n      <FormField\n        TagName=\"label\"\n        className={classNames('Select', {\n          [`Select--not-selected`]: this.state.notSelected,\n          [`Select--align-${alignment}`]: alignment\n        }, className)}\n        style={style}\n        getRootRef={getRootRef}\n        status={status}\n      >\n        <select\n          {...restProps}\n          className=\"Select__el\"\n          onChange={this.onChange}\n          value={this.value}\n          ref={this.getRef}\n        >\n          {placeholder && <option value=\"\">{placeholder}</option>}\n          {children}\n        </select>\n        <div className=\"Select__container\">\n          <div className=\"Select__title\">{this.state.title}</div>\n          <Icon24Dropdown />\n        </div>\n      </FormField>\n    );\n  }\n}\n"],"file":"Select.js"}